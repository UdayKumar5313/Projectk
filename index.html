<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ultimate Cybersecurity Password Generator</title>
  <style>
    /* ========= Global Reset & Base Styles ========= */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      font-family: 'Courier New', monospace;
      background: #000;
      color: #0f0;
      overflow-x: hidden;
      cursor: crosshair; /* Feature 50: crosshair cursor */
    }
    /* ========= Matrix-Style Falling Code Background (Feature 42) ========= */
    canvas#matrix {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1;
    }
    /* ========= Flickering Scanlines Overlay (Feature 47) ========= */
    .scanlines {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient( 
          0deg, 
          rgba(0,0,0,0) 0, 
          rgba(0,0,0,0) 1px, 
          rgba(0,0,0,0.05) 1px, 
          rgba(0,0,0,0.05) 2px 
        );
      pointer-events: none;
      z-index: 3;
      animation: flicker 1.5s infinite;
    }
    @keyframes flicker {
      0% { opacity: 1; }
      50% { opacity: 0.8; }
      100% { opacity: 1; }
    }
    /* ========= Main Container ========= */
    .container {
      position: relative;
      z-index: 5;
      max-width: 900px;
      margin: 50px auto;
      padding: 20px;
      background: rgba(0, 0, 0, 0.85);
      border: 2px solid #0f0;
      border-radius: 10px;
      box-shadow: 0 0 20px #0f0;
    }
    /* ========= Header with Typing Effect (Feature 46) ========= */
    header {
      text-align: center;
      font-size: 2em;
      margin-bottom: 20px;
      position: relative;
    }
    header::after {
      content: '|';
      animation: blink 1s step-end infinite;
      margin-left: 5px;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }
    /* ========= Settings Panel ========= */
    .settings {
      margin-bottom: 20px;
      border-bottom: 1px solid #0f0;
      padding-bottom: 10px;
    }
    .settings label {
      display: block;
      margin: 5px 0;
      font-size: 0.9em;
      /* Feature 63: Tooltip guidance via title attribute will be added to inputs below */
    }
    .settings input[type="range"],
    .settings input[type="text"],
    .settings input[type="checkbox"] {
      margin-right: 10px;
    }
    /* ========= Output Panel ========= */
    .output {
      margin-top: 20px;
    }
    .output #passwordDisplay {
      width: 100%;
      font-size: 1.5em;
      padding: 10px;
      background: #000;
      border: 1px solid #0f0;
      color: #0f0;
      border-radius: 5px;
      outline: none;
    }
    /* ========= Buttons with Glitch Hover Effect (Feature 43) ========= */
    button {
      background: #0f0;
      color: #000;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
      margin: 5px;
      transition: transform 0.2s;
      position: relative;
    }
    button:hover {
      transform: scale(1.1);
      animation: glitch 0.5s;
    }
    @keyframes glitch {
      0% { text-shadow: 2px 2px #0f0; }
      50% { text-shadow: -2px -2px #0f0; }
      100% { text-shadow: 2px 2px #0f0; }
    }
    /* ========= Strength Meter (Features 16,17,18,20) ========= */
    .meter {
      width: 100%;
      height: 10px;
      background: #333;
      border: 1px solid #0f0;
      margin: 10px 0;
      position: relative;
    }
    .meter .bar {
      height: 100%;
      width: 0%;
      background: #0f0;
      transition: width 0.5s;
    }
    /* ========= History & Session Log ========= */
    .history, .log {
      margin-top: 10px;
    }
    .history li, .log li {
      list-style: none;
      border-bottom: 1px solid #0f0;
      padding: 5px 0;
    }
    /* ========= Expiration Timer ========= */
    .expiration {
      margin-top: 10px;
    }
    progress {
      width: 100%;
      height: 20px;
      -webkit-appearance: none;
      appearance: none;
      border: 1px solid #0f0;
      border-radius: 5px;
    }
    progress::-webkit-progress-bar {
      background: #000;
    }
    progress::-webkit-progress-value {
      background: #0f0;
      border-radius: 5px;
    }
    /* ========= Controls Panel (Theme, Reset Settings) ========= */
    .controls {
      margin-top: 10px;
      text-align: center;
    }
    /* ========= Responsive Design (Feature 62) ========= */
    @media (max-width: 600px) {
      .container { width: 90%; margin: 20px auto; }
      header { font-size: 1.5em; }
      button { padding: 8px 12px; font-size: 0.9em; }
    }
  </style>
</head>
<body>
  <!-- ========= Matrix-Style Animated Background ========= -->
  <canvas id="matrix"></canvas>
  <div class="scanlines"></div>

  <!-- ========= Main Application Container ========= -->
  <div class="container" id="app">
    <!-- Header with Typing Effect (Feature 46) -->
    <header id="header">Initializing...</header>

    <!-- ========= Settings Panel (Features 2–11, 38, 66, 68, 70) ========= -->
    <div class="settings">
      <label> Password Length: <span id="lengthVal">16</span> (8–64)
        <input type="range" id="length" min="8" max="64" value="16" aria-label="Password Length" title="Select a length from 8 to 64">
      </label>
      <label><input type="checkbox" id="uppercase" checked aria-label="Uppercase Letters" title="Toggle uppercase letters">Include Uppercase Letters</label>
      <label><input type="checkbox" id="lowercase" checked aria-label="Lowercase Letters" title="Toggle lowercase letters">Include Lowercase Letters</label>
      <label><input type="checkbox" id="numbers" checked aria-label="Numbers" title="Toggle numbers">Include Numbers</label>
      <label><input type="checkbox" id="special" checked aria-label="Special Characters" title="Toggle special characters">Include Special Characters</label>
      <label><input type="checkbox" id="excludeSimilar" aria-label="Exclude Similar Characters" title="Exclude similar-looking characters (l, 1, I, O, 0)">Exclude Similar Characters</label>
      <label><input type="checkbox" id="pronounceable" aria-label="Pronounceable Password" title="Generate a pronounceable password">Pronounceable Password</label>
      <label><input type="checkbox" id="passphrase" aria-label="Passphrase Mode" title="Generate a passphrase with words separated by a symbol">Passphrase Mode</label>
      <label><input type="checkbox" id="randomCap" aria-label="Random Capitalization" title="Toggle to randomly capitalize passphrase words">Random Capitalize Passphrase Words</label>
      <label>Custom Symbols:
        <input type="text" id="customSymbols" placeholder="e.g. @#$%" aria-label="Custom Symbols" title="Input your own symbols/characters to add">
      </label>
      <label><input type="checkbox" id="complyOWASP" aria-label="Comply with OWASP" title="When enabled, password must meet OWASP guidelines">Comply with OWASP Guidelines</label>
      <label><input type="checkbox" id="soundEffects" checked aria-label="Sound Effects" title="Toggle sound effects on/off">Enable Sound Effects</label>
      <button id="resetSettings" aria-label="Reset Settings" title="Reset all settings to default">Reset Settings</button>
    </div>

    <!-- ========= Strength Meter, Entropy, Brute-Force Time, Secure Score (Features 16–20, 36–37) ========= -->
    <div class="meter"><div class="bar" id="strengthBar"></div></div>
    <div>Strength: <span id="strengthText">0</span></div>
    <div>Entropy: <span id="entropyText">0</span> bits</div>
    <div>Brute-Force Time: <span id="bruteTime">0 sec</span></div>
    <div>Secure Score: <span id="secureScore">0</span></div>

    <!-- ========= Clipboard & Output Features (Features 21–26, 29–30) ========= -->
    <div class="output">
      <input type="text" id="passwordDisplay" readonly aria-label="Generated Password">
      <button id="toggleVisibility" aria-label="Toggle Visibility" title="Show/Hide Password">Show</button>
      <button id="copyButton" aria-label="Copy Password" title="Copy to clipboard">Copy</button>
      <button id="regenButton" aria-label="Regenerate Password" title="Generate new password">Regenerate</button>
    </div>

    <!-- ========= Password History & Session Log (Features 27–29) ========= -->
    <div class="history">
      <h3>Password History (Last 5)</h3>
      <ul id="historyList"></ul>
    </div>
    <div class="log">
      <h3>Session Log</h3>
      <ul id="sessionLog"></ul>
    </div>

    <!-- ========= Password Expiration (Feature 19) ========= -->
    <div class="expiration">
      Password Expires In: <progress id="expiry" max="60" value="60"></progress>
    </div>

    <!-- ========= Cybersecurity Simulation & Alerts (Features 31–35) ========= -->
    <div class="alerts">
      <div id="breachAlert" style="display:none; color: red;">Warning: This password is present in breach data!</div>
      <div id="2fa" style="display:none;">2FA Code: <span id="twoFactorCode"></span></div>
    </div>

    <!-- ========= Animated Password Generation Process (Features 48,55) ========= -->
    <div id="animatedProcess" style="display:none; font-family: 'Courier New', monospace; font-size: 1.2em;">Calculating<span id="loadingDots"></span></div>

    <!-- ========= Command Prompt Console for Easter Eggs (Features 54,59,60) ========= -->
    <div>
      <input type="text" id="consoleInput" placeholder="Enter command..." aria-label="Console Command" title="Type 'sudo generate' for secret mode" style="width:100%; background:#000; border:1px solid #0f0; color:#0f0; padding:5px; margin-top:10px;">
    </div>

    <!-- ========= Controls: Theme Toggle (Features 58,70) ========= -->
    <div class="controls">
      <button id="themeSwitch" aria-label="Switch Theme" title="Toggle between hacker themes (light/dark)">Switch Theme</button>
    </div>
  </div>

  <!-- ========= Audio Elements for Sound Effects (Features 52,53) ========= -->
  <audio id="copySound" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQgAAAAA"></audio>
  <audio id="clickSound" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQgAAAAA"></audio>

  <script>
    // ========= MATRIX BACKGROUND =========
    const matrixCanvas = document.getElementById('matrix');
    const ctx = matrixCanvas.getContext('2d');
    matrixCanvas.width = window.innerWidth;
    matrixCanvas.height = window.innerHeight;
    const matrixChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()";
    const fontSize = 16;
    const columns = matrixCanvas.width / fontSize;
    const drops = Array.from({length: columns}).map(() => 1);
    function drawMatrix() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
      ctx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
      ctx.fillStyle = "#0f0";
      ctx.font = fontSize + "px monospace";
      for(let i = 0; i < columns; i++){
        const text = matrixChars.charAt(secureRandomIndex(matrixChars.length));
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if(Math.random() > 0.975) { drops[i] = 0; }
        drops[i]++;
      }
      requestAnimationFrame(drawMatrix);
    }
    drawMatrix();

    // ========= TYPING EFFECT FOR HEADER =========
    function typeHeader(text, i = 0) {
      const header = document.getElementById("header");
      if(i < text.length) {
        header.textContent += text.charAt(i);
        setTimeout(() => typeHeader(text, i+1), 100);
      }
    }
    window.onload = () => {
      setTimeout(() => { document.getElementById("header").textContent = ""; typeHeader("Ultimate Cybersecurity Password Generator"); 
      // Restore last password from localStorage (Feature 67)
      const lastPwd = localStorage.getItem("lastPassword");
      if(lastPwd) { document.getElementById("passwordDisplay").value = lastPwd; }
      }, 500);
    };

    // ========= UTILITY: Secure Random Index (Feature 1) =========
    function secureRandomIndex(max) {
      const arr = new Uint32Array(1);
      window.crypto.getRandomValues(arr);
      return arr[0] % max;
    }

    // ========= PASSWORD GENERATION =========
    function generatePasswordCore() {
      const length = parseInt(document.getElementById("length").value);
      let charset = "";
      if(document.getElementById("uppercase").checked) charset += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      if(document.getElementById("lowercase").checked) charset += "abcdefghijklmnopqrstuvwxyz";
      if(document.getElementById("numbers").checked) charset += "0123456789";
      if(document.getElementById("special").checked) charset += "!@#$%^&*()[]{}<>?/\\|`~";
      if(document.getElementById("customSymbols").value) {
        charset += document.getElementById("customSymbols").value;
      }
      if(document.getElementById("excludeSimilar").checked) {
        charset = charset.replace(/[l1IO0]/g, "");
      }
      // At least one charset must be selected
      if(charset.length === 0) {
        alert("Select at least one character set option.");
        return "";
      }
      // Option: If pronounceable is checked (Feature 8)
      if(document.getElementById("pronounceable").checked) {
        return generatePronounceable(length);
      }
      // Option: Passphrase Mode (Feature 9)
      if(document.getElementById("passphrase").checked) {
        return generatePassphrase(length, document.getElementById("randomCap").checked);
      }
      let password = "";
      for(let i = 0; i < length; i++){
        password += charset.charAt(secureRandomIndex(charset.length));
      }
      // Feature 12: Prevent dictionary words (simple check)
      const dictionary = ["password", "admin", "welcome", "login"];
      for(let word of dictionary) {
        if(password.toLowerCase().includes(word)) {
          password = "!" + password; // modify if detected
          break;
        }
      }
      // Features 13,14,15: Prevent common patterns, repeated characters, keyboard sequences
      if(/(.)\1\1/.test(password) || /qwerty|asdf/i.test(password)) {
        password = password.split('').reverse().join('');
      }
      return password;
    }
    // Generate a pronounceable password (simple alternating consonants and vowels) (Feature 8)
    function generatePronounceable(length) {
      const consonants = "bcdfghjklmnpqrstvwxyz";
      const vowels = "aeiou";
      let pwd = "";
      for(let i = 0; i < length; i++){
        pwd += (i % 2 === 0) ? consonants.charAt(secureRandomIndex(consonants.length))
                               : vowels.charAt(secureRandomIndex(vowels.length));
      }
      return pwd;
    }
    // Generate a passphrase: using a word list; (Feature 9 & 10)
    function generatePassphrase(wordCount, randomCap) {
      const words = ["cyber", "matrix", "hacker", "secure", "code", "data", "firewall", "encrypt", "protocol"];
      let phrase = "";
      for(let i = 0; i < wordCount; i++){
        let word = words[secureRandomIndex(words.length)];
        if(randomCap && secureRandomIndex(2) === 1) {
          word = word.charAt(0).toUpperCase() + word.slice(1);
        }
        phrase += word + (i < wordCount - 1 ? (document.getElementById("customSymbols").value || "-") : "");
      }
      return phrase;
    }

    // ========= Strength, Entropy, Brute-force, Secure Score =========
    function calculateEntropy(password, charsetSize) {
      return (password.length * Math.log2(charsetSize)).toFixed(2);
    }
    function estimateBruteForce(entropy) {
      const guessesPerSec = 1e9; // simulated speed
      const seconds = Math.pow(2, entropy) / guessesPerSec;
      if(seconds < 60) return seconds.toFixed(2) + " sec";
      else return (seconds/60).toFixed(2) + " min";
    }
    function updateStrengthIndicators(password) {
      const length = parseInt(document.getElementById("length").value);
      let charsetSize = 0;
      if(document.getElementById("uppercase").checked) charsetSize += 26;
      if(document.getElementById("lowercase").checked) charsetSize += 26;
      if(document.getElementById("numbers").checked) charsetSize += 10;
      if(document.getElementById("special").checked) charsetSize += 32;
      if(document.getElementById("customSymbols").value) charsetSize += document.getElementById("customSymbols").value.length;
      if(document.getElementById("excludeSimilar").checked) charsetSize -= 5;
      const entropy = calculateEntropy(password, charsetSize || 1);
      document.getElementById("entropyText").textContent = entropy;
      document.getElementById("bruteTime").textContent = estimateBruteForce(entropy);
      let percentage = Math.min(100, (entropy / 60) * 100);
      document.getElementById("strengthBar").style.width = percentage + "%";
      document.getElementById("strengthText").textContent = (percentage > 75 ? "Very Strong" : percentage > 50 ? "Strong" : percentage > 25 ? "Moderate" : "Weak");
      document.getElementById("secureScore").textContent = (percentage > 75 ? "Excellent" : percentage > 50 ? "Good" : "Weak");
      // Feature 36: Alert if entropy is less than 60 bits
      if(parseFloat(entropy) < 60) { alert("Warning: Entropy below 60 bits!"); }
      // Feature 37: Check NIST/OWASP guidelines (minimum 12 characters)
      if(document.getElementById("complyOWASP").checked && password.length < 12) {
        alert("Password does not meet NIST/OWASP guidelines (minimum 12 characters).");
      }
    }

    // ========= Clipboard Functions =========
    async function copyPassword() {
      const pwd = document.getElementById("passwordDisplay").value;
      try {
        await navigator.clipboard.writeText(pwd);
        document.getElementById("copyButton").textContent = "Copied!";
        playSound("copySound");
        setTimeout(() => { document.getElementById("copyButton").textContent = "Copy"; }, 2000);
        setTimeout(async () => { await navigator.clipboard.writeText(""); }, 15000);
      } catch (e) { alert("Clipboard copy failed."); }
    }

    // ========= Sound Effects =========
    function playSound(id) {
      if(document.getElementById("soundEffects").checked) {
        const sound = document.getElementById(id);
        if(sound) { sound.play(); }
      }
    }

    // ========= Password Visibility Toggle =========
    function toggleVisibility() {
      const field = document.getElementById("passwordDisplay");
      if(field.type === "text") {
        field.type = "password";
        document.getElementById("toggleVisibility").textContent = "Show";
      } else {
        field.type = "text";
        document.getElementById("toggleVisibility").textContent = "Hide";
      }
    }

    // ========= History, Session Log, & Reuse Detection =========
    function logPassword(pwd) {
      const sessLog = document.getElementById("sessionLog");
      const li = document.createElement("li");
      li.textContent = pwd;
      sessLog.appendChild(li);
    }
    function updateHistory(pwd) {
      const historyList = document.getElementById("historyList");
      const li = document.createElement("li");
      li.textContent = pwd;
      historyList.appendChild(li);
      while(historyList.childElementCount > 5) {
        historyList.removeChild(historyList.firstChild);
      }
    }
    function checkReuse(pwd) {
      if(window.sessionStorage.getItem(pwd)) {
        alert("Warning: Password generated before in this session!");
      } else {
        window.sessionStorage.setItem(pwd, true);
      }
    }
    function exportPasswordFile(pwd) {
      const blob = new Blob([btoa(pwd)], {type:"text/plain"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "password.enc";
      a.click();
    }

    // ========= Cybersecurity Simulation & Alerts =========
    function breachCheck(pwd) {
      const breachDataset = ["Password123!", "Qwerty!@#", "12345678"];
      if(breachDataset.includes(pwd)) {
        document.getElementById("breachAlert").style.display = "block";
      } else {
        document.getElementById("breachAlert").style.display = "none";
      }
    }
    function simulate2FA() {
      const code = Math.floor(100000 + Math.random()*900000).toString();
      document.getElementById("twoFactorCode").textContent = code;
      document.getElementById("2fa").style.display = "block";
    }
    function simulateBruteForce() {
      // Visual simulation: flash the strength meter red momentarily.
      const bar = document.getElementById("strengthBar");
      bar.style.background = "#f00";
      setTimeout(() => { bar.style.background = "#0f0"; }, 500);
    }
    function simulateLockout() {
      alert("Simulated Lockout: Weak settings detected!");
    }

    // ========= Expiration Timer =========
    function startExpirationTimer() {
      const prog = document.getElementById("expiry");
      prog.value = prog.max;
      const timer = setInterval(() => {
        prog.value--;
        if(prog.value <= 0) { clearInterval(timer); triggerGeneration(); }
      }, 1000);
    }

    // ========= Animated Password Generation Process =========
    function animateGeneration(callback) {
      const anim = document.getElementById("animatedProcess");
      const dots = document.getElementById("loadingDots");
      anim.style.display = "block";
      let count = 0;
      const interval = setInterval(() => {
        dots.textContent = ".".repeat(count % 4);
        count++;
      }, 500);
      setTimeout(() => {
        clearInterval(interval);
        anim.style.display = "none";
        callback();
      }, 2000);
    }

    // ========= MAIN TRIGGER: Generate Password & Update UI =========
    function triggerGeneration() {
      playSound("clickSound");
      animateGeneration(() => {
        const pwd = generatePasswordCore();
        if(!pwd) return;
        document.getElementById("passwordDisplay").value = pwd;
        localStorage.setItem("lastPassword", pwd);
        updateStrengthIndicators(pwd);
        breachCheck(pwd);
        if(document.getElementById("enable2FA") && document.getElementById("enable2FA").checked) {
          simulate2FA();
        }
        logPassword(pwd);
        updateHistory(pwd);
        checkReuse(pwd);
        // Optionally export password file (Feature 30) can be triggered here if desired
      });
      startExpirationTimer();
    }

    // ========= Advanced Keyboard Shortcuts & Accessibility =========
    document.addEventListener("keydown", function(e) {
      if(e.code === "Space" && document.activeElement.tagName !== "INPUT" && document.activeElement.tagName !== "TEXTAREA") {
        triggerGeneration();
      }
      if(e.ctrlKey && e.code === "KeyG") {
        e.preventDefault();
        triggerGeneration();
      }
      // ========= Konami Code Easter Egg (Feature 60) =========
      konami(e);
    });
    const konamiCode = [38,38,40,40,37,39,37,39,66,65];
    let konamiIndex = 0;
    function konami(e) {
      if(e.keyCode === konamiCode[konamiIndex]) {
        konamiIndex++;
        if(konamiIndex === konamiCode.length) {
          alert("Konami Code Activated! Easter Egg Unlocked!");
          konamiIndex = 0;
        }
      } else {
        konamiIndex = 0;
      }
    }

    // ========= Toggle Password Visibility =========
    document.getElementById("toggleVisibility").addEventListener("click", toggleVisibility);
    // ========= Clipboard Copy =========
    document.getElementById("copyButton").addEventListener("click", copyPassword);
    // ========= Regenerate =========
    document.getElementById("regenButton").addEventListener("click", triggerGeneration);
    // ========= Theme Toggle (Features 58,70) =========
    let currentTheme = localStorage.getItem("theme") || "dark";
    document.getElementById("themeSwitch").addEventListener("click", () => {
      if(currentTheme === "dark") {
        document.body.style.background = "#eee";
        document.body.style.color = "#000";
        currentTheme = "light";
      } else {
        document.body.style.background = "#000";
        document.body.style.color = "#0f0";
        currentTheme = "dark";
      }
      localStorage.setItem("theme", currentTheme);
    });
    // ========= Reset Settings =========
    document.getElementById("resetSettings").addEventListener("click", () => {
      localStorage.removeItem("passwordSettings");
      location.reload();
    });
    // ========= Save Settings using localStorage (Feature 66) =========
    document.querySelectorAll(".settings input").forEach(inp => {
      inp.addEventListener("change", () => {
        const settings = {
          length: document.getElementById("length").value,
          uppercase: document.getElementById("uppercase").checked,
          lowercase: document.getElementById("lowercase").checked,
          numbers: document.getElementById("numbers").checked,
          special: document.getElementById("special").checked,
          excludeSimilar: document.getElementById("excludeSimilar").checked,
          pronounceable: document.getElementById("pronounceable").checked,
          passphrase: document.getElementById("passphrase").checked,
          randomCap: document.getElementById("randomCap").checked,
          customSymbols: document.getElementById("customSymbols").value,
          complyOWASP: document.getElementById("complyOWASP").checked,
          soundEffects: document.getElementById("soundEffects").checked
        };
        localStorage.setItem("passwordSettings", JSON.stringify(settings));
      });
    });
    // ========= Restore Settings on Load =========
    window.onload = () => {
      const saved = localStorage.getItem("passwordSettings");
      if(saved) {
        const setts = JSON.parse(saved);
        document.getElementById("length").value = setts.length || 16;
        document.getElementById("uppercase").checked = setts.uppercase;
        document.getElementById("lowercase").checked = setts.lowercase;
        document.getElementById("numbers").checked = setts.numbers;
        document.getElementById("special").checked = setts.special;
        document.getElementById("excludeSimilar").checked = setts.excludeSimilar;
        document.getElementById("pronounceable").checked = setts.pronounceable;
        document.getElementById("passphrase").checked = setts.passphrase;
        document.getElementById("randomCap").checked = setts.randomCap;
        document.getElementById("customSymbols").value = setts.customSymbols;
        document.getElementById("complyOWASP").checked = setts.complyOWASP;
        document.getElementById("soundEffects").checked = setts.soundEffects;
      }
      document.getElementById("lengthVal").textContent = document.getElementById("length").value;
    };

    // ========= Console Command for Easter Egg (Feature 59) =========
    document.getElementById("consoleInput").addEventListener("keydown", function(e){
      if(e.key === "Enter") {
        const cmd = this.value.trim().toLowerCase();
        if(cmd === "sudo generate") {
          alert("Easter Egg Activated: Hack mode is on!");
          document.body.classList.add("glitch-mode"); // Feature 59: activate glitch mode
        } else {
          alert("Unknown command.");
        }
        this.value = "";
      }
    });
  </script>
</body>
</html>
